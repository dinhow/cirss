<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Interativa de Reativa√ß√£o e Manuten√ß√£o de Sistemas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <!-- Chosen Palette: Warm Neutrals with Slate Blue Accent -->
    <!-- Application Structure Plan: A guided, single-page tool. It now starts by sizing the system (Phase 1 cost) before estimating Phase 2 complexity. This creates a more logical and accurate estimation flow. Phase 1 cost is now dynamic based on system size, addressing a key user requirement for variable audit pricing. The rest of the structure remains, flowing from the known (audit cost) to the unknown (repair cost). A new Phase 3 section for monthly maintenance plans has been added. -->
    <!-- Visualization & Content Choices: Added a system size selector (buttons) for Phase 1. This choice dynamically updates the Phase 1 cost text and the overall summary calculation. The Phase 2 bar chart remains, visualizing the variable nature of repairs. Phase 3 uses interactive cards and a toggle for alarm system maintenance, providing clear, comparable service packages. This enhances the tool's accuracy while keeping its educational purpose. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease-in-out;
        }
        .btn-active {
            background-color: #374151;
            color: white;
            box-shadow: 0 4px 14px 0 rgb(55 65 81 / 39%);
        }
        .btn-inactive {
            background-color: #e5e7eb;
            color: #4b5563;
        }
        .section-title {
            color: #1f2937;
            font-weight: 600;
            font-size: 1.5rem;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        .icon-placeholder {
            font-size: 1.75rem;
            line-height: 1.5;
            width: 2rem;
            text-align: center;
            flex-shrink: 0;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-6xl">

        <header class="text-center mb-12">
            <div class="flex justify-center items-center mb-4">
                <span class="ml-4 text-2xl font-semibold text-gray-800">NC Solutions</span>
            </div>
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">Calculadora de Servi√ßos de Seguran√ßa</h1>
            <p class="text-lg text-gray-600">Uma ferramenta para estimar a reativa√ß√£o e a manuten√ß√£o cont√≠nua do seu sistema.</p>
        </header>

        <main class="space-y-12">
            
            <!-- Phase 1 Section -->
            <section id="phase-1" class="card p-6 md:p-8">
                <div class="flex items-center mb-6">
                    <div class="bg-gray-800 text-white rounded-full w-10 h-10 flex items-center justify-center text-xl font-bold mr-4">1</div>
                    <h2 class="section-title flex-1 !mb-0 !pb-0 !border-none">Fase 1: Auditoria e Diagn√≥stico (O Alicerce)</h2>
                </div>
                
                <p class="mb-6 text-gray-600">Esta fase inicial √© o passo mais importante. O custo da auditoria depende do tamanho do sistema, pois um local maior exige mais tempo de an√°lise. Selecione o porte do seu sistema para uma estimativa mais precisa do valor fixo do diagn√≥stico.</p>

                <div class="mb-8">
                    <h3 class="font-semibold text-lg text-center text-gray-700 mb-3">Qual o tamanho do seu sistema?</h3>
                    <div class="flex justify-center flex-wrap gap-2 sm:gap-4">
                        <button id="btn-small" class="size-btn btn-active px-4 py-2 rounded-lg font-semibold transition-all duration-200">Pequeno (at√© 20 pontos)</button>
                        <button id="btn-medium-size" class="size-btn btn-inactive px-4 py-2 rounded-lg font-semibold transition-all duration-200">M√©dio (21-50 pontos)</button>
                        <button id="btn-large" class="size-btn btn-inactive px-4 py-2 rounded-lg font-semibold transition-all duration-200">Grande (acima de 50)</button>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-8 items-start">
                    <div>
                        <h3 class="font-semibold text-xl mb-4 text-gray-700">O que n√≥s fazemos:</h3>
                        <ul class="space-y-4">
                            <li class="flex items-start">
                                <span class="icon-placeholder mr-3">üìã</span>
                                <div>
                                    <h4 class="font-semibold">Invent√°rio F√≠sico Detalhado</h4>
                                    <p class="text-gray-500 text-sm">Levantamento de todas as c√¢meras, sensores, centrais e componentes instalados.</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <span class="icon-placeholder mr-3">üîç</span>
                                <div>
                                    <h4 class="font-semibold">Verifica√ß√£o Funcional</h4>
                                    <p class="text-gray-500 text-sm">An√°lise do status operacional de cada dispositivo para identificar o que funciona e o que n√£o funciona.</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <span class="icon-placeholder mr-3">üó∫Ô∏è</span>
                                <div>
                                    <h4 class="font-semibold">Mapeamento do Sistema (Croqui)</h4>
                                    <p class="text-gray-500 text-sm">Elabora√ß√£o de um diagrama com a localiza√ß√£o exata e identifica√ß√£o de cada equipamento.</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h3 class="font-semibold text-xl mb-4 text-gray-700">O que voc√™ recebe:</h3>
                         <ul class="space-y-4 mb-6">
                            <li class="flex items-center">
                                <span class="text-green-500 text-2xl mr-3">‚úì</span>
                                <span>Relat√≥rio de Auditoria completo.</span>
                            </li>
                            <li class="flex items-center">
                                <span class="text-green-500 text-2xl mr-3">‚úì</span>
                                <span>Invent√°rio detalhado de equipamentos.</span>
                            </li>
                            <li class="flex items-center">
                                <span class="text-green-500 text-2xl mr-3">‚úì</span>
                                <span>Croqui da instala√ß√£o (mapa do sistema).</span>
                            </li>
                             <li class="flex items-center">
                                <span class="text-green-500 text-2xl mr-3">‚úì</span>
                                <span>Or√ßamento preciso para a Fase 2.</span>
                            </li>
                        </ul>
                        <div class="text-center border-t pt-4">
                            <p class="text-gray-600 font-medium">Valor Fixo Estimado para o Diagn√≥stico:</p>
                            <p id="phase-1-cost" class="text-3xl font-bold text-gray-800">A partir de R$ 580</p>
                            <p id="phase-1-hours" class="text-sm text-gray-500">Estimativa de 4 horas de servi√ßo</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Phase 2 Section -->
            <section id="phase-2" class="card p-6 md:p-8">
                <div class="flex items-center mb-6">
                    <div class="bg-gray-800 text-white rounded-full w-10 h-10 flex items-center justify-center text-xl font-bold mr-4">2</div>
                    <h2 class="section-title flex-1 !mb-0 !pb-0 !border-none">Fase 2: Manuten√ß√£o e Reativa√ß√£o (Estimativa Interativa)</h2>
                </div>

                <p class="mb-6 text-gray-600">Com o diagn√≥stico em m√£os, partimos para a reativa√ß√£o. O custo aqui √© vari√°vel e depende da complexidade das falhas encontradas. Use os bot√µes abaixo para simular diferentes cen√°rios e entender o impacto no or√ßamento. O modelo √© de <strong>Tempo & Materiais (T&M)</strong>: voc√™ paga apenas pelas horas trabalhadas e pe√ßas utilizadas.</p>
                
                <div class="flex justify-center space-x-2 sm:space-x-4 mb-6">
                    <button id="btn-low" class="complexity-btn btn-active px-4 py-2 rounded-lg font-semibold transition-all duration-200">Baixa Complexidade</button>
                    <button id="btn-medium-complexity" class="complexity-btn btn-inactive px-4 py-2 rounded-lg font-semibold transition-all duration-200">M√©dia Complexidade</button>
                    <button id="btn-high" class="complexity-btn btn-inactive px-4 py-2 rounded-lg font-semibold transition-all duration-200">Alta Complexidade</button>
                </div>

                <div class="grid lg:grid-cols-5 gap-8 items-center">
                    <div class="lg:col-span-3">
                        <div class="chart-container">
                            <canvas id="costChart"></canvas>
                        </div>
                    </div>
                    <div class="lg:col-span-2 bg-gray-50 p-6 rounded-lg">
                        <h3 id="scenario-title" class="font-semibold text-xl mb-3 text-gray-800">Cen√°rio: Baixa Complexidade</h3>
                        <p id="scenario-description" class="text-gray-600 mb-4 h-32">Normalmente envolve falhas simples e pontuais, que n√£o exigem grande retrabalho de infraestrutura.</p>
                        <ul id="scenario-tasks" class="space-y-2 text-sm text-gray-700">
                            <li>- Troca de conectores defeituosos.</li>
                            <li>- Substitui√ß√£o de uma ou duas fontes de alimenta√ß√£o.</li>
                            <li>- Reparo ou troca de um sensor de alarme.</li>
                        </ul>
                    </div>
                </div>
                <div class="mt-6 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg">
                    <div class="flex items-center">
                        <span class="material-symbols-outlined text-yellow-500 mr-3">warning</span>
                        <div>
                            <p class="font-bold text-yellow-800">Observa√ß√£o Importante</p>
                            <p class="text-sm text-yellow-700">Esta estimativa cobre reparos comuns. Falhas complexas na infraestrutura (ex: cabos rompidos, problemas em dutos) ser√£o or√ßadas √† parte para sua aprova√ß√£o antes de qualquer trabalho adicional.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Phase 3 Section: Maintenance Plans -->
            <section id="phase-3" class="card p-6 md:p-8">
                <div class="flex items-center mb-6">
                    <div class="bg-gray-800 text-white rounded-full w-10 h-10 flex items-center justify-center text-xl font-bold mr-4">3</div>
                    <h2 class="section-title flex-1 !mb-0 !pb-0 !border-none">Fase 3: Planos de Manuten√ß√£o Mensal (Opcional)</h2>
                </div>
                <p class="mb-6 text-gray-600">Ap√≥s a reativa√ß√£o, garanta a tranquilidade com um de nossos planos de manuten√ß√£o. Oferecemos monitoramento proativo da sa√∫de do sistema, suporte priorit√°rio e visitas preventivas para evitar futuras falhas.</p>
                
                <div class="flex flex-col items-center mb-4">
                    <div class="mb-2 text-center">
                        <h4 class="font-semibold text-gray-700">Tipo de Manuten√ß√£o:</h4>
                        <div id="maintenance-type-selector" class="flex justify-center gap-4 mt-2">
                            <button data-type="cftv" class="maintenance-type-btn btn-active px-4 py-2 rounded-lg font-semibold">Apenas CFTV</button>
                            <button data-type="cftv_alarm" class="maintenance-type-btn btn-inactive px-4 py-2 rounded-lg font-semibold">Incluir Alarme</button>
                        </div>
                        <p class="text-xs text-gray-500 mt-2 text-center">O servi√ßo de alarme inclui testes peri√≥dicos e monitoramento de falhas, n√£o de eventos de disparo.</p>
                    </div>
                </div>
                
                <div class="flex flex-col items-center mb-8">
                    <div class="mb-2 text-center">
                        <h4 class="font-semibold text-gray-700">Visitas T√©cnicas Extras (1h cada/m√™s):</h4>
                        <div id="extra-visits-selector" class="flex justify-center gap-4 mt-2">
                            <button data-visits="0" class="extra-visits-btn btn-active px-4 py-2 rounded-lg font-semibold">Nenhuma</button>
                            <button data-visits="1" class="extra-visits-btn btn-inactive px-4 py-2 rounded-lg font-semibold">+1 Visita</button>
                            <button data-visits="2" class="extra-visits-btn btn-inactive px-4 py-2 rounded-lg font-semibold">+2 Visitas</button>
                        </div>
                    </div>
                </div>

                <div class="grid md:grid-cols-3 gap-6">
                    <!-- Plan 1: Essencial -->
                    <div class="border rounded-lg p-6 flex flex-col">
                        <h3 class="text-xl font-bold text-center text-gray-800">Plano Essencial</h3>
                        <p class="text-center text-sm text-gray-500 mb-4">At√© 20 pontos</p>
                        <p id="plan-essential-price" class="text-center text-4xl font-bold text-gray-900 mb-4">R$ 150</p>
                        <p class="text-center text-gray-600 mb-6">/m√™s</p>
                        <ul class="space-y-3 text-gray-700 flex-grow">
                            <li class="flex items-center"><span class="material-symbols-outlined text-green-500 mr-2">check_circle</span>Monitoramento de Falhas</li>
                            <li class="flex items-center"><span class="material-symbols-outlined text-green-500 mr-2">check_circle</span>Suporte Priorit√°rio</li>
                            <li class="flex items-center"><span class="material-symbols-outlined text-green-500 mr-2">check_circle</span>1 Visita Preventiva/Trim.</li>
                            <li class="flex items-center"><span class="material-symbols-outlined text-gray-400 mr-2">cancel</span><span class="text-gray-500">Hora T√©cnica com Desconto</span></li>
                            <li class="flex items-center"><span class="material-symbols-outlined text-gray-400 mr-2">cancel</span><span class="text-gray-500">Desconto em Or√ßamentos</span></li>

                        </ul>
                    </div>
                    <!-- Plan 2: Avan√ßado -->
                    <div class="border-2 border-gray-800 rounded-lg p-6 flex flex-col relative">
                        <div class="absolute top-0 -translate-y-1/2 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs font-bold px-3 py-1 rounded-full">MAIS POPULAR</div>
                        <h3 class="text-xl font-bold text-center text-gray-800">Plano Avan√ßado</h3>
                        <p class="text-center text-sm text-gray-500 mb-4">21 a 50 pontos</p>
                        <p id="plan-advanced-price" class="text-center text-4xl font-bold text-gray-900 mb-4">R$ 225</p>
                        <p class="text-center text-gray-600 mb-6">/m√™s</p>
                        <ul class="space-y-3 text-gray-700 flex-grow">
                            <li class="flex items-center"><span class="material-symbols-outlined text-green-500 mr-2">check_circle</span>Monitoramento de Falhas</li>
                            <li class="flex items-center"><span class="material-symbols-outlined text-green-500 mr-2">check_circle</span>Suporte Priorit√°rio</li>
                            <li class="flex items-center"><span class="material-symbols-outlined text-green-500 mr-2">check_circle</span>2 Visitas Preventivas/Trim.</li>
                            <li class="flex items-center"><span class="material-symbols-outlined text-green-500 mr-2">check_circle</span>Hora T√©cnica com Desconto</li>
                            <li class="flex items-center"><span class="material-symbols-outlined text-gray-400 mr-2">cancel</span><span class="text-gray-500">Desconto em Or√ßamentos</span></li>
                        </ul>
                    </div>
                    <!-- Plan 3: Completo -->
                    <div class="border rounded-lg p-6 flex flex-col">
                        <h3 class="text-xl font-bold text-center text-gray-800">Plano Completo</h3>
                        <p class="text-center text-sm text-gray-500 mb-4">Acima de 50 pontos</p>
                        <p id="plan-complete-price" class="text-center text-4xl font-bold text-gray-900 mb-4">R$ 315</p>
                        <p class="text-center text-gray-600 mb-6">/m√™s</p>
                        <ul class="space-y-3 text-gray-700 flex-grow">
                            <li class="flex items-center"><span class="material-symbols-outlined text-green-500 mr-2">check_circle</span>Monitoramento de Falhas</li>
                            <li class="flex items-center"><span class="material-symbols-outlined text-green-500 mr-2">check_circle</span>Suporte Priorit√°rio</li>
                            <li class="flex items-center"><span class="material-symbols-outlined text-green-500 mr-2">check_circle</span>1 Visita Preventiva/M√™s</li>
                            <li class="flex items-center"><span class="material-symbols-outlined text-green-500 mr-2">check_circle</span>Hora T√©cnica com Desconto</li>
                            <li class="flex items-center"><span class="material-symbols-outlined text-green-500 mr-2">check_circle</span>Desconto em Or√ßamentos</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Next Steps -->
            <section id="next-steps" class="text-center py-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-3">Pr√≥ximos Passos</h2>
                <p class="text-gray-600 max-w-2xl mx-auto mb-6">O primeiro passo √© aprovar a <strong>Fase 1: Auditoria e Diagn√≥stico</strong>. Com o relat√≥rio t√©cnico em m√£os, teremos a seguran√ßa e a precis√£o necess√°rias para reativar seu sistema de forma eficiente e com o melhor custo-benef√≠cio.</p>
                <a href="https://wa.me/5541991073895?text=Ol√°!%20Gostaria%20de%20agendar%20a%20auditoria%20t√©cnica." target="_blank" class="inline-block bg-green-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-green-700 transition-colors duration-300 shadow-lg">
                    Agendar a Auditoria T√©cnica
                </a>
            </section>

        </main>
        
        <footer class="text-center mt-12 border-t pt-6">
            <p class="text-sm text-gray-500">&copy; 2025 NC Solutions. Todos os direitos reservados.</p>
            <p class="text-xs text-gray-400 mt-2">
                <a href="https://www.linkedin.com/in/seu-perfil-aqui" target="_blank" class="hover:underline">Desenvolvido por Edmilson R. Cristenson da Silva</a>
            </p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const auditHourlyRate = 145; 
            const standardVisitCost = 120;
            const discountedVisitCost = 108; // 10% de desconto sobre 120

            const systemSizes = {
                small: { hours: 4, textPrefix: 'A partir de ' },
                medium: { hours: 8, textPrefix: 'A partir de ' },
                large: { hours: 0, textPrefix: 'Sob Consulta' } 
            };

            const complexityScenarios = {
                low: {
                    title: 'Cen√°rio: Baixa Complexidade',
                    description: 'Normalmente envolve falhas simples e pontuais, que n√£o exigem grande retrabalho de infraestrutura.',
                    tasks: [
                        '- Troca de conectores defeituosos.',
                        '- Substitui√ß√£o de uma ou duas fontes de alimenta√ß√£o.',
                        '- Reparo ou troca de um sensor de alarme.'
                    ],
                    costs: { labor: 400, materials: 200 }
                },
                medium: {
                    title: 'Cen√°rio: M√©dia Complexidade',
                    description: 'Envolve a substitui√ß√£o de alguns equipamentos e reconfigura√ß√µes no sistema central.',
                    tasks: [
                        '- Substitui√ß√£o de algumas c√¢meras ou sensores.',
                        '- Troca de uma fonte de alimenta√ß√£o centralizada.',
                        '- Reconfigura√ß√£o de grava√ß√£o e detec√ß√£o no DVR/NVR.'
                    ],
                    costs: { labor: 800, materials: 650 }
                },
                high: {
                    title: 'Cen√°rio: Alta Complexidade',
                    description: 'Requer diagn√≥stico avan√ßado e pode envolver interven√ß√£o na infraestrutura de cabos ou rede.',
                    tasks: [
                        '- Repasse de um trecho de cabeamento.',
                        '- Diagn√≥stico de falhas em switches de rede (CFTV IP).',
                        '- Substitui√ß√£o de m√∫ltiplos equipamentos cr√≠ticos.'
                    ],
                    costs: { labor: 1600, materials: 1200 }
                }
            };
            
            const maintenancePlans = {
                essential: { base: 150, alarmSurcharge: 50 },
                advanced: { base: 225, alarmSurcharge: 75 },
                complete: { base: 315, alarmSurcharge: 105 }
            };

            let currentSize = 'small';
            let currentComplexity = 'low';
            let maintenanceType = 'cftv';
            let extraVisits = 0;

            const phase1CostEl = document.getElementById('phase-1-cost');
            const phase1HoursEl = document.getElementById('phase-1-hours');
            const scenarioTitleEl = document.getElementById('scenario-title');
            const scenarioDescriptionEl = document.getElementById('scenario-description');
            const scenarioTasksEl = document.getElementById('scenario-tasks');
            
            const sizeButtons = document.querySelectorAll('.size-btn');
            const complexityButtons = document.querySelectorAll('.complexity-btn');
            const maintenanceTypeButtons = document.querySelectorAll('.maintenance-type-btn');
            const extraVisitsButtons = document.querySelectorAll('.extra-visits-btn');

            const ctx = document.getElementById('costChart').getContext('2d');
            const costChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['M√£o de Obra', 'Materiais'],
                    datasets: [{
                        label: 'Custo Estimado (R$)',
                        data: [complexityScenarios.low.costs.labor, complexityScenarios.low.costs.materials],
                        backgroundColor: ['rgba(55, 65, 81, 0.8)', 'rgba(107, 114, 128, 0.8)'],
                        borderColor: ['rgb(55, 65, 81)', 'rgb(107, 114, 128)'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: { x: { beginAtZero: true, ticks: { callback: value => 'R$ ' + value } } },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: context => {
                                    let label = context.dataset.label || '';
                                    if (label) label += ': ';
                                    if (context.parsed.x !== null) {
                                        label += new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(context.parsed.x);
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });

            function formatCurrency(value) {
                return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(value);
            }

            function updateReactivationDisplay() {
                const sizeData = systemSizes[currentSize];
                const phase1Cost = sizeData.hours * auditHourlyRate;

                if (currentSize === 'large') {
                    phase1CostEl.textContent = sizeData.textPrefix;
                    phase1HoursEl.textContent = 'O tempo de servi√ßo ser√° definido ap√≥s visita t√©cnica.';
                } else {
                    phase1CostEl.textContent = sizeData.textPrefix + formatCurrency(phase1Cost);
                    phase1HoursEl.textContent = `Estimativa de ${sizeData.hours} horas de servi√ßo`;
                }
                
                const complexityData = complexityScenarios[currentComplexity];
                scenarioTitleEl.textContent = complexityData.title;
                scenarioDescriptionEl.textContent = complexityData.description;
                scenarioTasksEl.innerHTML = complexityData.tasks.map(task => `<li>${task}</li>`).join('');
                
                costChart.data.datasets[0].data = [complexityData.costs.labor, complexityData.costs.materials];
                costChart.update();
            }
            
            function updateMaintenanceDisplay() {
                const includeAlarm = maintenanceType === 'cftv_alarm';
                
                const essentialExtraVisitsCost = extraVisits * standardVisitCost;
                const essentialPrice = maintenancePlans.essential.base + (includeAlarm ? maintenancePlans.essential.alarmSurcharge : 0) + essentialExtraVisitsCost;
                document.getElementById('plan-essential-price').textContent = formatCurrency(essentialPrice);

                const discountedExtraVisitsCost = extraVisits * discountedVisitCost;
                const advancedPrice = maintenancePlans.advanced.base + (includeAlarm ? maintenancePlans.advanced.alarmSurcharge : 0) + discountedExtraVisitsCost;
                document.getElementById('plan-advanced-price').textContent = formatCurrency(advancedPrice);

                const completePrice = maintenancePlans.complete.base + (includeAlarm ? maintenancePlans.complete.alarmSurcharge : 0) + discountedExtraVisitsCost;
                document.getElementById('plan-complete-price').textContent = formatCurrency(completePrice);
            }

            sizeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    currentSize = button.id.split('-')[1];
                    if (button.id.includes('medium-size')) currentSize = 'medium';
                    sizeButtons.forEach(btn => btn.classList.replace('btn-active', 'btn-inactive'));
                    button.classList.replace('btn-inactive', 'btn-active');
                    updateReactivationDisplay();
                });
            });

            complexityButtons.forEach(button => {
                button.addEventListener('click', () => {
                    currentComplexity = button.id.split('-')[1];
                    if (button.id.includes('medium-complexity')) currentComplexity = 'medium';
                    complexityButtons.forEach(btn => btn.classList.replace('btn-active', 'btn-inactive'));
                    button.classList.replace('btn-inactive', 'btn-active');
                    updateReactivationDisplay();
                });
            });
            
            maintenanceTypeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    maintenanceType = button.dataset.type;
                    maintenanceTypeButtons.forEach(btn => btn.classList.replace('btn-active', 'btn-inactive'));
                    button.classList.replace('btn-inactive', 'btn-active');
                    updateMaintenanceDisplay();
                });
            });

            extraVisitsButtons.forEach(button => {
                button.addEventListener('click', () => {
                    extraVisits = parseInt(button.dataset.visits, 10);
                    extraVisitsButtons.forEach(btn => btn.classList.replace('btn-active', 'btn-inactive'));
                    button.classList.replace('btn-inactive', 'btn-active');
                    updateMaintenanceDisplay();
                });
            });

            updateReactivationDisplay();
            updateMaintenanceDisplay();
        });
    </script>
</body>
</html>
